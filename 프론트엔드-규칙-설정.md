# yourFlace 프론트엔드 규칙 설정

## 1. API 기본 규칙

- **Base URL**: `/yourflace`
- **인증**: JWT Bearer Token (Access 30분 / Refresh 7일)
- **페이지네이션**: `skip`, `limit` (최대 100) 쿼리 파라미터 사용
- **소프트 삭제**: DELETE 요청 시 실제 삭제가 아닌 `status='D'`로 변경
- **응답 코드**: POST 생성 시 `201`, 조회 `200`, 업데이트 `200`, 삭제 `200`

---

## 2. 인증 및 사용자 관리

### 인증 (Auth)
- 로그인: 이메일/비밀번호 + OAuth (Google, Kakao, Naver)
- JWT Access Token은 요청 헤더 `Authorization: Bearer {token}`으로 전달
- Refresh Token으로 Access Token 갱신
- 로그인 이력 기록됨 (IP, 디바이스 정보)

### 사용자 (Users) `/users`
- 회원가입, 조회, 수정, 탈퇴 (소프트 삭제)
- 상태: `active`, `D`(삭제됨)

### 프로필 (Profile) `/profiles`
- 이름, 닉네임, 생년월일, 성별, 전화번호, 프로필 이미지
- 사용자와 1:1 관계

### 사용자 설정 (Settings) `/user-settings`
- 언어, 테마, 개인정보 설정, 알림 설정

### 배송지 (Addresses) `/user-addresses`
- 수령인, 우편번호, 주소, 기본 배송지 플래그

### 디바이스 (Devices) `/user-devices`
- 디바이스 유형, 토큰, 앱/OS 버전

### 차단 관리
- `/global-blacklist` - 전체 플랫폼 차단
- `/subscription-blacklist` - 구독 단위 차단

---

## 3. 아티스트 관리

### 아티스트 (Artists) `/artists`
- 활동명, 프로필/커버 이미지, 상태
- 사용자와 1:1 관계

### 카테고리 `/artist-categories`, `/artist-category-map`
- 아티스트 장르/카테고리 분류 (다대다 관계)

### 소셜 링크 `/artist-social-links`
- 플랫폼명 (Instagram, Twitter 등), URL, 팔로워 수

### 매니저 `/managers`
- 사용자-아티스트 매핑, 역할 (manager, admin 등)

---

## 4. 구독 시스템

### 구독 (Subscriptions) `/subscriptions`
- 팬-아티스트 구독 관계
- 상태: subscribed, cancelled
- 결제 유형, 시작/종료일
- 팬 닉네임/프로필 (구독 내 별도 설정)

### 구독 플랜 `/subscription-plans`
- 가격, 결제 주기 (월간/연간), 기간, 혜택 설명

### 구독 취소 `/subscription-cancellations`
- 취소 이력 관리

---

## 5. 콘텐츠 관리

### 게시글 (Posts) `/posts`
- 작성자 ID/유형, 내용, 작성 권한, 공개 범위, 태그
- 게시일 설정 가능

### 게시글 이미지 `/post-images`
- 게시글-이미지 매핑 (정렬 순서 포함)

### 게시글 댓글 `/post-comments`
- 대댓글 지원 (parent comment 참조)

### 게시글 통계 `/post-stats`
- 조회수, 댓글 수, 좋아요 수 (팬/아티스트 구분)

### 이미지 메타데이터 `/images`
- URL, 썸네일, 크기(너비/높이), 파일 크기, MIME 타입

### 아티스트 갤러리
- `/artist-images` - 용도, 공개 범위, 게시일, 태그
- `/artist-image-comments` - 이미지 댓글
- `/artist-image-stats` - 이미지 통계

### 아티스트 영상
- `/artist-videos` - URL, 썸네일, 제목, 재생시간, 공개 범위
- `/artist-video-comments` - 영상 댓글
- `/artist-video-stats` - 영상 통계

---

## 6. 채팅 시스템

### 채팅방 `/chat-rooms`
- 방 유형, 아티스트 ID, 이미지, 마지막 메시지 시간

### 메시지 `/chat-messages`
- 발신자 ID/유형, 메시지 유형, 고정 지원

### 채팅 미디어
- `/chat-images` - 채팅 내 이미지
- `/chat-videos` - 채팅 내 영상

### 읽음 확인 `/chat-read-receipts`
- 사용자별 메시지 읽음 시간 기록

### 고정 메시지 `/chat-pins`
### 신고 `/chat-reports`

### WebSocket 실시간 통신 `/chat/ws/{chat_room_id}`
- 연결 시 JWT 토큰을 쿼리 파라미터로 전달
- **메시지 타입**:
  - `chat.send` - 메시지 전송 (DB 저장)
  - `typing.start` / `typing.stop` - 타이핑 표시
  - `read` - 메시지 읽음 처리
- 온라인 상태 추적
- Redis Pub/Sub 기반 멀티 인스턴스 지원

---

## 7. 결제 시스템

### 결제 (Payments) `/payments`
- 결제 유형, 금액, 통화 (KRW), 상태, 거래 ID
- 관련 객체 추적 (구독, 주문 등)

### 결제 수단 `/payment-methods`
- 결제 수단 유형, 제공자, 계좌 정보 (JSON), 기본 결제 수단 플래그

### 환불 `/payment-refunds`
- 원 결제 참조, 환불 금액, 상태

---

## 8. 쇼핑 (E-Commerce)

### 상품 `/products`
- 이름, 설명, 가격, 재고, 카테고리
- 판매 기간 설정, 공개 여부

### 상품 이미지 `/product-images`

### 주문 `/orders`
- 주문 번호, 총액, 상태 (pending/paid/shipped/delivered)
- 결제 및 배송지 참조

### 주문 상세 `/order-items`
- 상품, 수량, 단가

---

## 9. 이벤트

### 이벤트 `/events`
- 제목, 설명, 이벤트 유형, 날짜, 장소
- 최대 참가자 수, 등록 기간

### 참가자 `/event-participants`
- 등록 상태 (registered/cancelled)

### 출석 `/event-attendance`

---

## 10. 좋아요 및 추천

### 팬 좋아요 `/fan-likes`
- 구독 ID, 대상 (게시글/이미지/영상)

### 팬 추천 `/fan-recommendations`

### 아티스트 좋아요 `/artist-post-likes`

### 아티스트 추천 `/artist-post-recommendations`

---

## 11. 알림 시스템

### 알림 `/notifications`
- 알림 유형, 소스/대상 참조
- 읽음 상태, 푸시 상태

### 알림 설정 `/notification-settings`
- 유형별 on/off 토글

### 알림 템플릿 `/notification-templates`
- 제목/메시지 템플릿 (변수 포함)

### 예약 알림 `/scheduled-notifications`

### 시스템 로그 `/system-logs`

---

## 12. 검색 및 필터

### 캘린더 검색 `/calendar-searches`
- 저장된 이벤트 검색

### 검색 필터 저장 `/saved-search-filters`
- 필터 데이터 JSON 형태 저장

---

## 13. 콘텐츠 모더레이션

### 모더레이션 모델 `/moderation-models`
- AI 모더레이션 모델 관리

### 콘텐츠 모더레이션 `/content-moderation`
- 콘텐츠 유형/ID, 플래그 상태, 리뷰 여부
- AI 판정 결과 (JSON), 관리자 리뷰

---

## 14. 통계/분석

### 아티스트 콘텐츠 통계 `/artist-content-stats`
- 게시글, 이미지, 영상 수 / 참여도

### 아티스트 채팅 통계 `/artist-chat-stats`

### 구독자 콘텐츠 통계 `/subscriber-content-stats`

### 구독자 채팅 통계 `/subscriber-chat-stats`

---

## 15. 관리자 (Admin)

### FAQ `/faq`
- 카테고리, 질문/답변, 우선순위, 활성 여부

### 배너 `/banners`
- 마케팅/프로모션 배너

### 공지사항 `/notices`
- 대상 유형/ID로 범위 지정 가능

### 시스템 메시지 `/system-messages`

### 에러 로그 `/error-logs`

---

## 16. 파일 업로드 규칙

- **저장소**: Cloudflare R2 (S3 호환)
- **지원 이미지**: JPEG, PNG, WebP, GIF
- **지원 영상**: MP4, WebM
- **최대 업로드 크기**: 100MB
- 업로드 시 썸네일 자동 생성

---

## 17. 공통 CRUD 패턴

모든 엔드포인트는 동일한 패턴을 따름:

| 메서드 | 경로 | 설명 |
|--------|------|------|
| `POST /` | 생성 (201) |
| `GET /{id}` | 단건 조회 |
| `GET /` | 목록 조회 (페이지네이션) |
| `PATCH /{id}` | 부분 수정 |
| `DELETE /{id}` | 소프트 삭제 |

---

## 18. 금액 처리

- 통화: KRW (한국 원)
- 소수점 처리: Numeric(10,2)

###### 페이지 css 규칙 ######

COLOR
MAIN  #E666FA
POINT #9370DB
DEEP #4B0082
SUB #F878FF

검색 UI는 달력으로 할건데 기본 달력 말고 검색에 특화된 달력 UI

상단 HEADER 는

기본 : 햄버거 || 로고 || SHOP || 로그인 로그아웃 (회원정보)
관리자 :햄버거|| 검색 || 로그인 로그아웃


기본 유저의 햄버거는 구독한 아티스트가 나오게
관리자의 햄버거는 검색 카테고리

아티스트로 들어가서 카테고리 탭이 유저 전용 포스트 , 아티스트 전용 포스트 ,이미지,동영상 이렇게 있어야 함

MAIN:
메인에는 유저 포스트 , 아티스트 포스트 , 아티스트 이미지, 아티스트 동영상이 카테고리 탭으로 HEADER 바로 아래 MAIN 젤 위에 보이도록

FOOTER : 아티스트 채팅 구독한 유저만 제일 오른쪽에 아티스트 챗 UI 보이고

아티스트 채팅 구독하지 않는 유저는 안보이게(관리자 포함)

UI 기본 구성

HEADER
__________________________________
MAIN

_______________________________________
FOOTER



